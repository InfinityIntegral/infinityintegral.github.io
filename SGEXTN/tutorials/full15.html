
<!DOCTYPE html>
<html lang="en-SG">
<head>
<meta charset="UTF-8">
<title>Full Tutorial Part 15</title>
<link rel="icon" href="/icon.png" type="image/png">
<meta property="og:image" content="/icon.png">
<meta name="twitter:image" content="/icon.png">
<link rel="apple-touch-icon" href="/icon.png">
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "WebSite",
    "url": "https://infinityintegral.github.io",
    "image": "/icon.png"
}
</script>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
@font-face {
	font-family: "SingScript.sg";
	src: url("/SingScript.sg")format("truetype");
	font-weight: normal;
	font-style: normal;
}

:root {
	--c0: rgb(0, 0, 0);
	--c1: rgb(64, 0, 50);
	--c2: rgb(128, 0, 100);
	--c3: rgb(191, 0, 150);
	--c4: rgb(255, 0, 200);
	--c5: rgb(255, 64, 214);
	--c6: rgb(255, 128, 227);
	--c7: rgb(255, 191, 241);
	--c8: rgb(255, 255, 255);
}

*{
    font-family: "SingScript.sg";
	max-width: 100%;
	word-break: break-word;
	-webkit-text-size-adjust: 100%;
	-ms-text-size-adjust: 100%;
}

.title {
	color: var(--c4);
	font-size: 3.5rem;
	margin: 0;
	font-weight: normal;
}
.title::selection {
	color: var(--c8);
	background-color: var(--c4);
	font-size: 3.5rem;
	margin: 0;
	font-weight: normal;
}

.header {
	color: var(--c4);
	font-size: 2.5rem;
	margin: 0;
	font-weight: normal;
}
.header::selection {
	color: var(--c8);
	background-color: var(--c4);
	font-size: 2.625rem;
	margin: 0;
	font-weight: normal;
}

.description {
	color: var(--c4);
	font-size: 1.75rem;
	margin: 0;
	white-space: pre-wrap;
}
.description::selection {
	color: var(--c8);
	background-color: var(--c4);
	font-size: 1.75rem;
	margin: 0;
	white-space: pre-wrap;
}

.note {
	color: var(--c4);
	font-size: 1.75rem;
	margin: 0.25rem;
	white-space: pre-wrap;
    border: 0.25rem solid var(--c7);
    padding: 0.25rem;
}
.note::selection {
	color: var(--c8);
	background-color: var(--c4);
	font-size: 1.75rem;
	margin: 0.25rem;
	white-space: pre-wrap;
    border: 0.25rem solid var(--c7);
    padding: 0.25rem;
}

.warning {
	color: var(--c4);
	font-size: 1.75rem;
	margin: 0.25rem;
	white-space: pre-wrap;
    border: 0.25rem solid var(--c4);
    padding: 0.25rem;
}
.warning::selection {
	color: var(--c8);
	background-color: var(--c4);
	font-size: 1.75rem;
	margin: 0.25rem;
	white-space: pre-wrap;
    border: 0.25rem solid var(--c4);
    padding: 0.25rem;
}

.link {
	color: var(--c2);
	text-decoration: underline;
}
.link:hover {
	color: var(--c2);
	background-color: var(--c7);
	text-decoration: underline;
}
.link:active {
	color: var(--c2);
	background-color: var(--c6);
	text-decoration: underline;
}
.link::selection {
	color: var(--c8);
	background-color: var(--c4);
	text-decoration: underline;
}

.button {
	color: var(--c8);
	background-color: var(--c4);
	font-size: 1.75rem;
	border: none;
}
.button:hover {
	color: var(--c7);
	background-color: var(--c3);
	font-size: 1.75rem;
	border: none;
}
.button:active {
	color: var(--c6);
	background-color: var(--c2);
	font-size: 1.75rem;
	border: none;
}
.button::selection {
	color: var(--c4);
	background-color: var(--c8);
	font-size: 1.75rem;
	border: none;
}

.input {
	color: var(--c8);
	background-color: var(--c4);
	font-size: 1.75rem;
	border: none;
	outline: none;
	text-align: center;
}
.input:hover {
	color: var(--c7);
	background-color: var(--c3);
	font-size: 1.75rem;
	border: none;
	outline: none;
	text-align: center;
}
.input:focus {
	color: var(--c6);
	background-color: var(--c2);
	font-size: 1.75rem;
	border: none;
	outline: none;
	text-align: center;
}
.input::selection {
	color: var(--c4);
	background-color: var(--c8);
	font-size: 1.75rem;
	border: none;
	outline: none;
	text-align: center;
}

.highlight {
    animation: highlightFlash 2s ease-out;
}

@keyframes highlightFlash {
    0% {background-color: var(--c6);}
    100% {background-color: var(--c8);}
}
</style>
<script>
let m = (new Date()).getMonth() + 1;
if(m >= 7 && m <= 9){
    document.documentElement.style.setProperty("--c0", "rgb(0, 0, 0)");
    document.documentElement.style.setProperty("--c1", "rgb(60, 9, 14)");
    document.documentElement.style.setProperty("--c2", "rgb(119, 19, 27)");
    document.documentElement.style.setProperty("--c3", "rgb(179, 28, 41)");
    document.documentElement.style.setProperty("--c4", "rgb(238, 37, 54)");
    document.documentElement.style.setProperty("--c5", "rgb(242, 92, 104)");
    document.documentElement.style.setProperty("--c6", "rgb(247, 146, 155)");
    document.documentElement.style.setProperty("--c7", "rgb(251, 201, 205)");
    document.documentElement.style.setProperty("--c8", "rgb(255, 255, 255)");
}
function highlightSection(){
    let tag = window.location.hash.substring(1);
    if(tag == ""){return;}
    let element = document.getElementById(tag);
    if(element == null){return;}
    element.classList.add("highlight");
    element.addEventListener("animationend", () => {element.classList.remove("highlight");}, {once: true});
}
window.addEventListener("DOMContentLoaded", highlightSection);
window.addEventListener("hashchange", highlightSection);
</script>
</head>
<body style="margin-left: 1em;">
<p class="description" style="color: rgb(238, 37, 54); text-align: center; font-size: 2.5rem">sincerely <img src="/flag.png" style="vertical-align: middle; height: 2.5rem; image-rendering: auto;"> Singaporean</p>
<div style="width: 100%; height: 0.25rem; background-color: var(--c8);"></div>
<div><button class="button" style="width: 100%;" onclick="location.href='/'">Project 05524F.sg</button></div>
<div style="width: 100%; height: 0.25rem; background-color: var(--c8);"></div>
<div><button class="button" style="width: 100%;" onclick="location.href='../readme/readme'">SGEXTN Documentation</button></div><div style="width: 100%; height: 0.25rem; background-color: var(--c8);"></div><p class="warning">If you have not done so, read this full <a class="link" href="../tutorials/full">tutorial</a> on how to use SGEXTN to build an application.</p><div style="width: 100%; height: 0.75rem; background-color: var(--c8);"></div><h1 class="title">Full Tutorial Part 15</h1>
<div style="width: 100%; height: 1.75rem; background-color: var(--c8);"></div>
<p class="description">&#9;See <a class="link" href="full14">here</a> for the previous part of the tutorial.</p>
<p class="description">&#9;In the previous part, we wrote code to save user defined preset options for our application.</p>
<div style="width: 100%; height: 1.75rem; background-color: var(--c8);"></div>
<h2 class="header" id="">using saved user data</h2>
<p class="description">&#9;Next we will be implementing the UI page that allows users to select and use presets.</p>
<p class="description">&#9;This will need a new UI page, so we will create a new class, SGCLPPresetsSelectionPage. By now you should already know how to do this.</p>
<p class="description">&#9;As usual, we will declare these stuff</p>
<p class="warning">static SGWBackground* instance;&#10;static SGWBackground* initialise();&#10;static void activate();</p>
<p class="description">&#9;Remember to forward declare the <a class="link" href="../cppclass/sgwbackground">SGWBackground</a> class instead of including the header file. Also remember to add the source file into the CMakeLists.txt</p>
<div style="width: 100%; height: 1.75rem; background-color: var(--c8);"></div>
<p class="description">&#9;For this page, we can have a scroll view filling almost the entire screen, leaving a bit of space for a cancel button at the bottom of the page. The buttons to select presets would be listed in order inside the scroll view.</p>
<p class="description">&#9;Since we will need to add stuff into the scroll view, we will need to store a pointer to it also. We also need to declare a function for the cancel button that disables the UI page.</p>
<p class="warning">static SGWWidget* listBackground;&#10;static void cancelPresetSelection();</p>
<p class="description">&#9;We then can implement SGCLPPresetsSelectionPage::initialise, SGCLPPresetsSelectionPage::activate, and SGCLPPresetsSelectionPage::cancelPresetSelection.</p>
<p class="warning">SGWBackground* SGCLPPresetsSelectionPage::initialise(){&#10;    SGWBackground* bg = new SGWPageBackground(SGWWidget::parentWidget, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 1.0f, 0.0f, 8);&#10;    SGCLPPresetsSelectionPage::listBackground = new SGWScrollView(bg, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 1.0f, -1.0f, 0.0f, 0.0f, 0.0f, 0.5f, 8);&#10;    new SGWTextButton(bg, "cancel", &SGCLPPresetsSelectionPage::cancelPresetSelection, 0.0f, 0.0f, 1.0f, -1.0f, 1.0f, 0.0f, 0.0f, 1.0f);&#10;    return bg;&#10;}&#10;&#10;void SGCLPPresetsSelectionPage::activate(){&#10;    SGWBackground::enable(SGCLPPresetsSelectionPage::instance, &SGCLPPresetsSelectionPage::initialise, nullptr);&#10;}&#10;&#10;void SGCLPPresetsSelectionPage::cancelPresetSelection(){&#10;    SGWBackground::disable(SGCLPPresetsSelectionPage::instance);&#10;}</p>
<p class="description">&#9;After that we can modify the code that creates the "use preset" button in SGCLPOptionsPage::initialise to make the button run SGCLPPresetsSelectionPage::activate. You should already know how to do this.</p>
<p class="description">&#9;Note that currently the height of the scroll view is always a <a class="link" href="../tutorials/wdistance">w-distance ⁽㈳㈴㈳㈮㈱㈨㈠㈫ ㈧㈤㈱㈤⁾</a> of (0.0, 0.0), which always resolves to 0 pixels. This will be dynamically determined when the buttons are actually placed into the scroll view.</p>
<p class="description">&#9;Testing shows that the page appears when the "use preset" button is pressed, and when the "cancel" button inside the page is pressed, it disappears as expected.</p>
<div style="width: 100%; height: 1.75rem; background-color: var(--c8);"></div>
<p class="description">&#9;Next we can actually add the buttons to choose a preset.</p>
<p class="description">&#9;To do that, we simply look through the list of files in the folder and for every file, we make a button for it. We then resize the scroll view appropriately and put all the buttons inside.</p>
<p class="description">&#9;When a button is clicked, it has to run a <a class="link" href="../tutorials/callback">callback function ⁽㈳㈴㈳㈮㈱㈨㈠㈫ ㈧㈤㈱㈤⁾</a> that sets the presets to whatever stored in the file. This means we need the path to the file.</p>
<p class="description">&#9;This can be done by storing the path in <a class="link" href="../cppclass/sgwbutton#SGXString_attachedString_">SGWButton::attachedString</a>, which is automatically passed to <a class="link" href="../cppclass/sgwbutton#void_ptr_clickFunctionWithString_const_SGXString_ref_">SGWButton::clickFunctionWithString</a> when the button is clicked.</p>
<p class="description">&#9;We can define the function</p>
<p class="warning">static void useSavedPreset(const SGXString& filePath);</p>
<p class="description">&#9;Then we modify the implementation of SGCLPPresetsSelectionPage::initialise and write the implementation of SGCLPPresetsSelectionPage::useSavedPreset as below.</p>
<p class="warning">SGWBackground* SGCLPPresetsSelectionPage::initialise(){&#10;    SGWBackground* bg = new SGWPageBackground(SGWWidget::parentWidget, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 1.0f, 0.0f, 8);&#10;    SGWScrollView* scrollView = new SGWScrollView(bg, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 1.0f, -1.0f, 0.0f, 0.0f, 0.0f, 0.5f, 8);&#10;    SGCLPPresetsSelectionPage::listBackground = scrollView;&#10;    new SGWTextButton(bg, "cancel", &SGCLPPresetsSelectionPage::cancelPresetSelection, 0.0f, 0.0f, 1.0f, -1.0f, 1.0f, 0.0f, 0.0f, 1.0f);&#10;    SGLArray&lt;SGXString&gt; filesList = SGXFileSystem::getFilesListWithExtension(SGXFileSystem::userDataFilePath, "sg");&#10;    (*scrollView).setI0(static_cast&lt;float&gt;(filesList.length()));&#10;    for(int i=0; i&lt;filesList.length(); i++){&#10;        SGWButton* button = new SGWTextButton(scrollView, SGXFileSystem::getFileNameNoExtension(filesList.at(i)), nullptr, 0.0f, 0.0f, 0.0f, static_cast&lt;float&gt;(i), 1.0f, 0.0f, 0.0f, 1.0f);&#10;        (*button).attachedString = filesList.at(i);&#10;        (*button).clickFunctionWithString = &SGCLPPresetsSelectionPage::useSavedPreset;&#10;    }&#10;    return bg;&#10;}&#10;&#10;void SGCLPPresetsSelectionPage::useSavedPreset(const SGXString &filePath){&#10;    SGXFile file(filePath);&#10;    SGCLPOptionsPage::chosenForegroundColour = file.readColourRGBA();&#10;    SGCLPOptionsPage::chosenBackgroundColour = file.readColourRGBA();&#10;    int patternIndex = file.readInt();&#10;    if(patternIndex == 1){SGCLPOptionsPage::chosenPattern = SGCLPOptionsPage::Circle;}&#10;    else if(patternIndex == 2){SGCLPOptionsPage::chosenPattern = SGCLPOptionsPage::Polygon;}&#10;    else if(patternIndex == 3){SGCLPOptionsPage::chosenPattern = SGCLPOptionsPage::Star;}&#10;    else{SGCLPOptionsPage::chosenPattern = SGCLPOptionsPage::Fractal;}&#10;    SGCLPOptionsPage::chosenVertexCount = file.readInt();&#10;    SGWBackground::disable(SGCLPPresetsSelectionPage::instance);&#10;    SGWBackground::disable(SGCLPOptionsPage::instance);&#10;    SGCLPDisplayPage::activate();&#10;}</p>
<p class="description">&#9;Since we have not actually really built the display page yet, it is impossible to confirm if this actually works. However we do observe that when a preset is selected, both the preset selection page and the options page turn off, while the display page turns on. This is expected behaviour, so we will assume everything is good for now.</p>
<div style="width: 100%; height: 1.75rem; background-color: var(--c8);"></div>
<p class="description">&#9;With another major feature completed, we can perform a clang-tidy scan and commit the changes to GitHub. By now you should know how to do this.</p>
<div style="width: 100%; height: 1.75rem; background-color: var(--c8);"></div>
<p class="description">&#9;See <a class="link" href="full16">here</a> for the next part of the tutorial.</p>
<p class="description">&#9;</p>
<p class="description"></p>

<div style="width: 100%; height: 1.75rem; background-color: var(--c8);"></div>
<div style="width: 100%; height: 0.25rem; background-color: var(--c4);"></div>
<div style="width: 100%; height: 0.25rem; background-color: var(--c8);"></div>
<p class="description">©2025 05524F.sg (Singapore)</p>
<p class="description"><a class="link" href="/contact">contact 05524F / report a bug / make a suggestion</a></p>
<p class="description"><a class="link" href="/values">about 05524F SINGAPORE values</a></p>
<p class="description"><a class="link" href="/projects">list of 05524F projects</a></p>
<div style="width: 100%; height: 0.25rem; background-color: var(--c8);"></div>
<div style="width: 100%; height: 0.25rem; background-color: var(--c4);"></div>
<div style="width: 100%; height: 0.25rem; background-color: var(--c8);"></div>
</body>
</html>

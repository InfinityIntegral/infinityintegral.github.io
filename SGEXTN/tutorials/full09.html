
<!DOCTYPE html>
<html lang="en-SG">
<head>
<meta charset="UTF-8">
<title>Full Tutorial Part 9</title>
<link rel="icon" href="/icon.png" type="image/png">
<meta property="og:image" content="/icon.png">
<meta name="twitter:image" content="/icon.png">
<link rel="apple-touch-icon" href="/icon.png">
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "WebSite",
    "url": "https://infinityintegral.github.io",
    "image": "/icon.png"
}
</script>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
@font-face {
	font-family: "SingScript.sg";
	src: url("/SingScript.sg")format("truetype");
	font-weight: normal;
	font-style: normal;
}

:root {
	--c0: rgb(0, 0, 0);
	--c1: rgb(64, 0, 50);
	--c2: rgb(128, 0, 100);
	--c3: rgb(191, 0, 150);
	--c4: rgb(255, 0, 200);
	--c5: rgb(255, 64, 214);
	--c6: rgb(255, 128, 227);
	--c7: rgb(255, 191, 241);
	--c8: rgb(255, 255, 255);
}

*{
    font-family: "SingScript.sg";
	max-width: 100%;
	word-break: break-word;
	-webkit-text-size-adjust: 100%;
	-ms-text-size-adjust: 100%;
}

.title {
	color: var(--c4);
	font-size: 3.5rem;
	margin: 0;
	font-weight: normal;
}
.title::selection {
	color: var(--c8);
	background-color: var(--c4);
	font-size: 3.5rem;
	margin: 0;
	font-weight: normal;
}

.header {
	color: var(--c4);
	font-size: 2.5rem;
	margin: 0;
	font-weight: normal;
}
.header::selection {
	color: var(--c8);
	background-color: var(--c4);
	font-size: 2.625rem;
	margin: 0;
	font-weight: normal;
}

.description {
	color: var(--c4);
	font-size: 1.75rem;
	margin: 0;
	white-space: pre-wrap;
}
.description::selection {
	color: var(--c8);
	background-color: var(--c4);
	font-size: 1.75rem;
	margin: 0;
	white-space: pre-wrap;
}

.note {
	color: var(--c4);
	font-size: 1.75rem;
	margin: 0.25rem;
	white-space: pre-wrap;
    border: 0.25rem solid var(--c7);
    padding: 0.25rem;
}
.note::selection {
	color: var(--c8);
	background-color: var(--c4);
	font-size: 1.75rem;
	margin: 0.25rem;
	white-space: pre-wrap;
    border: 0.25rem solid var(--c7);
    padding: 0.25rem;
}

.warning {
	color: var(--c4);
	font-size: 1.75rem;
	margin: 0.25rem;
	white-space: pre-wrap;
    border: 0.25rem solid var(--c4);
    padding: 0.25rem;
}
.warning::selection {
	color: var(--c8);
	background-color: var(--c4);
	font-size: 1.75rem;
	margin: 0.25rem;
	white-space: pre-wrap;
    border: 0.25rem solid var(--c4);
    padding: 0.25rem;
}

.link {
	color: var(--c2);
	text-decoration: underline;
}
.link:hover {
	color: var(--c2);
	background-color: var(--c7);
	text-decoration: underline;
}
.link:active {
	color: var(--c2);
	background-color: var(--c6);
	text-decoration: underline;
}
.link::selection {
	color: var(--c8);
	background-color: var(--c4);
	text-decoration: underline;
}

.button {
	color: var(--c8);
	background-color: var(--c4);
	font-size: 1.75rem;
	border: none;
}
.button:hover {
	color: var(--c7);
	background-color: var(--c3);
	font-size: 1.75rem;
	border: none;
}
.button:active {
	color: var(--c6);
	background-color: var(--c2);
	font-size: 1.75rem;
	border: none;
}
.button::selection {
	color: var(--c4);
	background-color: var(--c8);
	font-size: 1.75rem;
	border: none;
}

.input {
	color: var(--c8);
	background-color: var(--c4);
	font-size: 1.75rem;
	border: none;
	outline: none;
	text-align: center;
}
.input:hover {
	color: var(--c7);
	background-color: var(--c3);
	font-size: 1.75rem;
	border: none;
	outline: none;
	text-align: center;
}
.input:focus {
	color: var(--c6);
	background-color: var(--c2);
	font-size: 1.75rem;
	border: none;
	outline: none;
	text-align: center;
}
.input::selection {
	color: var(--c4);
	background-color: var(--c8);
	font-size: 1.75rem;
	border: none;
	outline: none;
	text-align: center;
}

.highlight {
    animation: highlightFlash 2s ease-out;
}

@keyframes highlightFlash {
    0% {background-color: var(--c6);}
    100% {background-color: var(--c8);}
}
</style>
<script>
let m = (new Date()).getMonth() + 1;
if(m >= 7 && m <= 9){
    document.documentElement.style.setProperty("--c0", "rgb(0, 0, 0)");
    document.documentElement.style.setProperty("--c1", "rgb(60, 9, 14)");
    document.documentElement.style.setProperty("--c2", "rgb(119, 19, 27)");
    document.documentElement.style.setProperty("--c3", "rgb(179, 28, 41)");
    document.documentElement.style.setProperty("--c4", "rgb(238, 37, 54)");
    document.documentElement.style.setProperty("--c5", "rgb(242, 92, 104)");
    document.documentElement.style.setProperty("--c6", "rgb(247, 146, 155)");
    document.documentElement.style.setProperty("--c7", "rgb(251, 201, 205)");
    document.documentElement.style.setProperty("--c8", "rgb(255, 255, 255)");
}
function highlightSection(){
    let tag = window.location.hash.substring(1);
    if(tag == ""){return;}
    let element = document.getElementById(tag);
    if(element == null){return;}
    element.classList.add("highlight");
    element.addEventListener("animationend", () => {element.classList.remove("highlight");}, {once: true});
}
window.addEventListener("DOMContentLoaded", highlightSection);
window.addEventListener("hashchange", highlightSection);
</script>
</head>
<body style="margin-left: 1em;">
<p class="description" style="color: rgb(238, 37, 54); text-align: center; font-size: 2.5rem">sincerely <img src="/flag.png" style="vertical-align: middle; height: 2.5rem; image-rendering: auto;"> Singaporean</p>
<div style="width: 100%; height: 0.25rem; background-color: var(--c8);"></div>
<div><button class="button" style="width: 100%;" onclick="location.href='/'">Project 05524F.sg</button></div>
<div style="width: 100%; height: 0.25rem; background-color: var(--c8);"></div>
<div><button class="button" style="width: 100%;" onclick="location.href='../readme/readme'">SGEXTN Documentation</button></div><div style="width: 100%; height: 0.25rem; background-color: var(--c8);"></div><p class="warning">If you have not done so, read this full <a class="link" href="../tutorials/full">tutorial</a> on how to use SGEXTN to build an application.</p><div style="width: 100%; height: 0.75rem; background-color: var(--c8);"></div><h1 class="title">Full Tutorial Part 9</h1>
<div style="width: 100%; height: 1.75rem; background-color: var(--c8);"></div>
<p class="description">&#9;See <a class="link" href="full08">here</a> for the previous part of the tutorial.</p>
<p class="description">&#9;In the previous part, we wrote behaviours for the options page buttons that select which pattern to use.</p>
<div style="width: 100%; height: 1.75rem; background-color: var(--c8);"></div>
<h2 class="header" id="">writing options page behaviour (part 4)</h2>
<p class="description">&#9;We can now try to get the input field working and worry about presets later.</p>
<p class="description">&#9;The input field in the options page is used for the user to input how many vertices they want in their star or polygon. Obviously this must be a integer that is at least 3, so we need to detect if that is the case.</p>
<div style="width: 100%; height: 1.75rem; background-color: var(--c8);"></div>
<p class="description">&#9;SGEXTN input fields (<a class="link" href="../cppclass/sgwinput">SGWInput</a>) have 3 <a class="link" href="../tutorials/callback">callback function ⁽㈳㈴㈳㈮㈱㈨㈠㈫ ㈧㈤㈱㈤⁾</a> attached (not including versions that pass stuff in arguments), that is <a class="link" href="../cppclass/sgwinput#void_ptr_focusStartFunction_func_">SGWInput::focusStartFunction</a>, <a class="link" href="../cppclass/sgwinput#void_ptr_focusEndFunction_func_">SGWInput::focusEndFunction</a>, and <a class="link" href="../cppclass/sgwinput#void_ptr_textChangedFunction_func_">SGWInput::textChangedFunction</a>.</p>
<p class="description">&#9;<a class="link" href="../cppclass/sgwinput#void_ptr_focusStartFunction_func_">SGWInput::focusStartFunction</a> triggers when the user clicks into the input field, <a class="link" href="../cppclass/sgwinput#void_ptr_focusEndFunction_func_">SGWInput::focusEndFunction</a> triggers when the user clicks out of the input field, and <a class="link" href="../cppclass/sgwinput#void_ptr_textChangedFunction_func_">SGWInput::textChangedFunction</a> triggers when the text in the input field is edited.</p>
<p class="description">&#9;For input validation, <a class="link" href="../cppclass/sgwinput#void_ptr_focusEndFunction_func_">SGWInput::focusEndFunction</a> should be used. The <a class="link" href="../tutorials/callback">callback function ⁽㈳㈴㈳㈮㈱㈨㈠㈫ ㈧㈤㈱㈤⁾</a> argument in the constructor actually exists for you to pass a <a class="link" href="../cppclass/sgwinput#void_ptr_focusEndFunction_func_">SGWInput::focusEndFunction</a>.</p>
<div style="width: 100%; height: 1.75rem; background-color: var(--c8);"></div>
<p class="description">&#9;In the <a class="link" href="../tutorials/callback">callback function ⁽㈳㈴㈳㈮㈱㈨㈠㈫ ㈧㈤㈱㈤⁾</a> attached to the input field, we should check if the text inside represents a integer at least 3. If it is not, we should mark the input field as invalid using <a class="link" href="../cppclass/sgwinput#void_setInvalid_bool_">SGWInput::setInvalid</a> and also show a warning below. Otherwise we hide the warning and mark the input field as not invalid.</p>
<p class="description">&#9;Before we implement the function, we first need to make a warning. A warning is just a <a class="link" href="../cppclass/sgwtextlabel">SGWTextLabel</a> with a darker colour, and can be created by passing true to the isWarning argument in the <a class="link" href="../cppclass/sgwtextlabel">SGWTextLabel</a> constructor.</p>
<p class="description">&#9;We declare a new variable in SGCLPOptionsPage</p>
<p class="warning">static SGWWidget* polygonSideCountWarning;</p>
<p class="description">&#9;initialise it</p>
<p class="warning">SGWWidget* SGCLPOptionsPage::polygonSideCountWarning = nullptr;</p>
<p class="description">&#9;and create it in SGCLPOptionsPage::initialise</p>
<p class="warning">SGCLPOptionsPage::polygonSideCountWarning = new SGWTextLabel(bg, "integer 3 or above", 0.5f, 0.1f, 0.0f, 15.5f, 0.5f, -0.6f, 0.0f, 0.75f, SGWHorizontalAlignment::Left, true);</p>
<p class="description">&#9;Note that the font size is <a class="link" href="../tutorials/wdistance">w-distance ⁽㈳㈴㈳㈮㈱㈨㈠㈫ ㈧㈤㈱㈤⁾</a> (0.0, 0.75) instead of the usual (0.0, 1.0). Also this is placed immediately below the input field. The warning is disabled upon creation and need to be manually enabled using <a class="link" href="../cppclass/sgwwidget#void_setItemVisibility_bool_">SGWWidget::setItemVisibility</a> when necessary.</p>
<div style="width: 100%; height: 1.75rem; background-color: var(--c8);"></div>
<p class="description">&#9;Then we can implement input validation.</p>
<p class="description">&#9;First we declare the function</p>
<p class="warning">static void polygonSideCountCheck();</p>
<p class="description">&#9;We then change the line creating the input field in SGCLPOptionsPage::initialise to use the function</p>
<p class="warning">SGCLPOptionsPage::polygonSideCountInput = new SGWTextInput(bg, &SGCLPOptionsPage::polygonSideCountCheck, 0.5f, 0.1f, 0.0f, 14.5f, 0.5f, -0.6f, 0.0f, 1.0f);</p>
<p class="description">&#9;then we give a reasonable default of 3 vertices in SGCLPOptionsPage::reset</p>
<p class="warning">(*SGCLPOptionsPage::polygonSideCountInput).setTextFromInt(3);</p>
<p class="description">&#9;Note that <a class="link" href="../cppclass/sgwinput#void_setTextFromInt_int_">SGWInput::setTextFromInt</a> directly sets the string representation of a integer to the input field. There is also <a class="link" href="../cppclass/sgwinput#void_setTextFromFloat_float_">SGWInput::setTextFromFloat</a> and the usual <a class="link" href="../cppclass/sgwinput#void_setTextFromString_const_SGXString_ref_">SGWInput::setTextFromString</a>.</p>
<p class="description">&#9;Finally we implement the function. <a class="link" href="../cppclass/sgwinput#nodiscard_int_getTextAsInt_bool_ptr_int_int_const_">SGWInput::getTextAsInt</a> has built in range validation. There is also <a class="link" href="../cppclass/sgwinput#nodiscard_float_getTextAsFloat_bool_ptr_float_float_const_">SGWInput::getTextAsFloat</a> and <a class="link" href="../cppclass/sgwinput#nodiscard_SGXString_getTextAsString_func_const_">SGWInput::getTextAsString</a>.</p>
<p class="warning">void SGCLPOptionsPage::polygonSideCountCheck(){&#10;    bool isValid = true;&#10;    (void)((*SGCLPOptionsPage::polygonSideCountInput).getTextAsInt(&isValid, 3, SGLIntLimits::maximum()));&#10;    if(isValid == false){&#10;        (*SGCLPOptionsPage::polygonSideCountInput).setInvalid(true);&#10;        (*SGCLPOptionsPage::polygonSideCountWarning).setItemVisibility(true);&#10;    }&#10;    else{&#10;        (*SGCLPOptionsPage::polygonSideCountInput).setInvalid(false);&#10;        (*SGCLPOptionsPage::polygonSideCountWarning).setItemVisibility(false);&#10;    }&#10;}</p>
<p class="description">&#9;Note that in this code we use <a class="link" href="../cppclass/sglintlimits">SGLIntLimits</a> so we need to have</p>
<p class="warning">#include &lt;SGLIntLimits.h&gt;</p>
<p class="description">&#9;<a class="link" href="../cppclass/sglintlimits">SGLIntLimits</a>, <a class="link" href="../cppclass/sglfloatlimits">SGLFloatLimits</a>, and <a class="link" href="../cppclass/sgllonglonglimits">SGLLongLongLimits</a> give the numeric limits of each data type. That includes the maximum representable number, minimum representable number, accuracy, etc.</p>
<div style="width: 100%; height: 1.75rem; background-color: var(--c8);"></div>
<p class="description">&#9;This almost works, but after testing we find 1 issue. If the input field contained invalid text but then is disabled by choosing another pattern, the warning still shows. To fix this we can modify the enabling and disabling logic.</p>
<p class="warning">void SGCLPOptionsPage::patternSelect(SGWButton *x){&#10;    (*SGCLPOptionsPage::patternCircleButton).setSelected(false);&#10;    (*SGCLPOptionsPage::patternPolygonButton).setSelected(false);&#10;    (*SGCLPOptionsPage::patternStarButton).setSelected(false);&#10;    (*SGCLPOptionsPage::patternFractalButton).setSelected(false);&#10;    (*x).setSelected(true);&#10;    if((*x).attachedInt == 0){&#10;        (*SGCLPOptionsPage::polygonSideCountInput).setItemVisibility(false);&#10;        (*SGCLPOptionsPage::polygonSideCountWarning).setItemVisibility(false);&#10;    }&#10;    else{&#10;        (*SGCLPOptionsPage::polygonSideCountInput).setItemVisibility(true);&#10;        if((*SGCLPOptionsPage::polygonSideCountInput).getInvalid() == true){(*SGCLPOptionsPage::polygonSideCountWarning).setItemVisibility(true);}&#10;    }&#10;}</p>
<div style="width: 100%; height: 1.75rem; background-color: var(--c8);"></div>
<p class="description">&#9;See <a class="link" href="full10">here</a> for the next part of the tutorial.</p>
<p class="description">&#9;</p>
<p class="description"></p>

<div style="width: 100%; height: 1.75rem; background-color: var(--c8);"></div>
<div style="width: 100%; height: 0.25rem; background-color: var(--c4);"></div>
<div style="width: 100%; height: 0.25rem; background-color: var(--c8);"></div>
<p class="description">©2025 05524F.sg (Singapore)</p>
<p class="description"><a class="link" href="/contact">contact 05524F / report a bug / make a suggestion</a></p>
<p class="description"><a class="link" href="/values">about 05524F SINGAPORE values</a></p>
<p class="description"><a class="link" href="/projects">list of 05524F projects</a></p>
<div style="width: 100%; height: 0.25rem; background-color: var(--c8);"></div>
<div style="width: 100%; height: 0.25rem; background-color: var(--c4);"></div>
<div style="width: 100%; height: 0.25rem; background-color: var(--c8);"></div>
</body>
</html>
